.TH MNF 1 "2025-10-07" "mnf 1.0.0" "User Commands"
.SH NAME
mnf \- move nested files from a source tree into a flat destination directory
.SH SYNOPSIS
.B mnf
.I SOURCE_DIR DEST_DIR
.RI [ options ]
.SH DESCRIPTION
.B mnf
recursively traverses
.I SOURCE_DIR
and moves files that are located in nested subdirectories into
.I DEST_DIR .
Files directly in
.I SOURCE_DIR
are left untouched by default (\fI--min-depth\fR defaults to 1).
If
.I DEST_DIR
is located inside
.I SOURCE_DIR,
that subtree is automatically excluded from the traversal.

Collisions in the destination are handled by \fB--mode\fR:
\fIrename\fR (default, appends \fB_1\fR, \fB_2\fR, ...),
\fIskip\fR, or \fIoverwrite\fR.

On cross-filesystem moves (EXDEV), files are copied and the source is removed.
.SH OPTIONS
.TP
.BR -h ", " --help
Show help and exit.
.TP
.BR -V ", " --version
Show version and exit.
.TP
.BR -n ", " --dry-run
Show what would happen, do not change anything.
.TP
.BR -t " " N ", " --threads " " N
Number of worker threads (default: 1).
.TP
.BR -v ", " --verbose
Increase verbosity (repeat for debug).
.TP
.BR -q ", " --quiet
Reduce verbosity.
.TP
.BR --progress
Show per-file copy progress.
.TP
.BR --no-preserve-times
Do not preserve atime/mtime during copy.
.TP
.BR --include-symlinks
Move symlink files as symlinks (recreate link in destination).
.TP
.BR --prune-empty-dirs
Remove empty directories in the source tree after processing.
.TP
.BR --min-depth " " N
Minimum depth to move (default: 1).
.TP
.BR --max-depth " " N
Maximum depth to traverse (default: unlimited).
.TP
.BR --include " " GLOBS
Comma-separated glob list to include (e.g. \fB**/*.jpg,**/*.png\fR).
.TP
.BR --exclude " " GLOBS
Comma-separated glob list to exclude.
.TP
.BR --allow-ext " " LIST
Comma-separated whitelist of file extensions (case-insensitive).
.TP
.BR --deny-ext " " LIST
Comma-separated blacklist of file extensions (case-insensitive).
.TP
.BR --min-size " " SIZE
Minimum file size (e.g. 10K, 5M, 1G).
.TP
.BR --max-size " " SIZE
Maximum file size.
.TP
.BR --newer-than " " SPEC
Only files with mtime newer than SPEC. SPEC can be ISO date (YYYY-MM-DD) or relative (e.g. 7d).
.TP
.BR --older-than " " SPEC
Only files with mtime older than SPEC. SPEC can be ISO date (YYYY-MM-DD) or relative (e.g. 30d).
.SH EXAMPLES
Move all nested files into \fI./flat\fR:
.PP
.nf
mnf ./src ./flat
.fi
.PP
Move only images larger than 1 MiB using 4 threads and show progress:
.PP
.nf
mnf ./src ./flat --threads 4 --include "**/*.jpg,**/*.png" --min-size 1M --progress
.fi
.PP
Dry run skipping tmp directories:
.PP
.nf
mnf ./src ./flat --dry-run --exclude "**/tmp/**"
.fi
.SH EXIT STATUS
Returns 0 on success. Nonzero if any file failed to move.
.SH AUTHOR
Generated by ChatGPT for the user.
.SH SEE ALSO
.BR find (1),
.BR mv (1)
